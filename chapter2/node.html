<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>NodeJS | note_web</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="shortcut icon" type="image/x-icon" href="./images/favicon.ico">
    <meta name="description" content="熊木木出版">
    
    <link rel="preload" href="/note_web/assets/css/0.styles.7cc68753.css" as="style"><link rel="preload" href="/note_web/assets/js/app.0a8a88e2.js" as="script"><link rel="preload" href="/note_web/assets/js/2.a8152735.js" as="script"><link rel="preload" href="/note_web/assets/js/15.361aa7de.js" as="script"><link rel="prefetch" href="/note_web/assets/js/10.0b7deae7.js"><link rel="prefetch" href="/note_web/assets/js/11.b28cb736.js"><link rel="prefetch" href="/note_web/assets/js/12.1e24d268.js"><link rel="prefetch" href="/note_web/assets/js/13.6a7dc0b8.js"><link rel="prefetch" href="/note_web/assets/js/14.5ebcae47.js"><link rel="prefetch" href="/note_web/assets/js/16.d753cdbb.js"><link rel="prefetch" href="/note_web/assets/js/17.aad2eb09.js"><link rel="prefetch" href="/note_web/assets/js/18.fb79d12c.js"><link rel="prefetch" href="/note_web/assets/js/19.b0404afa.js"><link rel="prefetch" href="/note_web/assets/js/20.367a78b7.js"><link rel="prefetch" href="/note_web/assets/js/21.2c0d84e8.js"><link rel="prefetch" href="/note_web/assets/js/22.58f449fc.js"><link rel="prefetch" href="/note_web/assets/js/23.fe2549f8.js"><link rel="prefetch" href="/note_web/assets/js/24.7fe34f57.js"><link rel="prefetch" href="/note_web/assets/js/25.c8dbb4c7.js"><link rel="prefetch" href="/note_web/assets/js/26.49c63d2e.js"><link rel="prefetch" href="/note_web/assets/js/27.65899db2.js"><link rel="prefetch" href="/note_web/assets/js/28.9363e098.js"><link rel="prefetch" href="/note_web/assets/js/29.aebf9855.js"><link rel="prefetch" href="/note_web/assets/js/3.03f151d4.js"><link rel="prefetch" href="/note_web/assets/js/30.5dab8d40.js"><link rel="prefetch" href="/note_web/assets/js/4.d5e2826f.js"><link rel="prefetch" href="/note_web/assets/js/5.9499be40.js"><link rel="prefetch" href="/note_web/assets/js/6.153d8ea2.js"><link rel="prefetch" href="/note_web/assets/js/7.2aac5bdb.js"><link rel="prefetch" href="/note_web/assets/js/8.84af4e42.js"><link rel="prefetch" href="/note_web/assets/js/9.747e23d2.js">
    <link rel="stylesheet" href="/note_web/assets/css/0.styles.7cc68753.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note_web/" class="home-link router-link-active"><img src="/note_web/images/logo.png" alt="note_web" class="logo"> <span class="site-name can-hide">note_web</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note_web/chapter1/html.html" class="nav-link">
  H5
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JS" class="dropdown-title"><span class="title">JS</span> <span class="arrow down"></span></button> <button type="button" aria-label="JS" class="mobile-dropdown-title"><span class="title">JS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note_web/chapter2/初级Js.html" class="nav-link">
  普通
</a></li><li class="dropdown-item"><!----> <a href="/note_web/chapter2/高级Js.html" class="nav-link">
  高级
</a></li></ul></div></div><div class="nav-item"><a href="/note_web/chapter3/移动端相关.html" class="nav-link">
  移动端
</a></div><div class="nav-item"><a href="/note_web/chapter4/基础使用.html" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/note_web/chapter6/常见问题.html" class="nav-link">
  常见问题
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/note_web/chapter1/html.html" class="nav-link">
  H5
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JS" class="dropdown-title"><span class="title">JS</span> <span class="arrow down"></span></button> <button type="button" aria-label="JS" class="mobile-dropdown-title"><span class="title">JS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note_web/chapter2/初级Js.html" class="nav-link">
  普通
</a></li><li class="dropdown-item"><!----> <a href="/note_web/chapter2/高级Js.html" class="nav-link">
  高级
</a></li></ul></div></div><div class="nav-item"><a href="/note_web/chapter3/移动端相关.html" class="nav-link">
  移动端
</a></div><div class="nav-item"><a href="/note_web/chapter4/基础使用.html" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/note_web/chapter6/常见问题.html" class="nav-link">
  常见问题
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/note_web/笔记指南.html" class="sidebar-link">笔记指南</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>一.H5</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note_web/chapter1/h5.html" class="sidebar-link">H5</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>二.JS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note_web/chapter2/初级Js.html" class="sidebar-link">初级 Js</a></li><li><a href="/note_web/chapter2/高级Js.html" class="sidebar-link">高级 Js</a></li><li><a href="/note_web/chapter2/自定义call-apply-bind方法.html" class="sidebar-link">自定义 call 和 apply 和 bind 方法</a></li><li><a href="/note_web/chapter2/ECMAScript.html" class="sidebar-link">ECMAScript</a></li><li><a href="/note_web/chapter2/node.html" aria-current="page" class="active sidebar-link">NodeJS</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/note_web/chapter2/git.html" class="sidebar-link">Git</a></li><li><a href="/note_web/chapter2/ajax.html" class="sidebar-link">AJAX</a></li><li><a href="/note_web/chapter2/git常用指令.html" class="sidebar-link">git 常用指令</a></li><li><a href="/note_web/chapter2/模块化.html" class="sidebar-link">模块化</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>三.移动端</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note_web/chapter3/移动端相关.html" class="sidebar-link">移动端相关</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>四.Vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note_web/chapter4/基础使用.html" class="sidebar-link">基础使用</a></li><li><a href="/note_web/chapter4/项目中遇到的问题.html" class="sidebar-link">项目中遇到的问题</a></li><li><a href="/note_web/chapter4/vue面试.html" class="sidebar-link">vue 面试</a></li><li><a href="/note_web/chapter4/源码.html" class="sidebar-link">源码解析</a></li><li><a href="/note_web/chapter4/vue扩展.html" class="sidebar-link">Vue 扩展</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>五.webpack</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note_web/chapter5/构建工具.html" class="sidebar-link">构建工具</a></li><li><a href="/note_web/chapter5/webpack总结.html" class="sidebar-link">总结 Webpack</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>六.常见问题</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note_web/chapter6/常见问题.html" class="sidebar-link">常见问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>七.React</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note_web/chapter7/react面试.html" class="sidebar-link">react 面试</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>八.小程序</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note_web/chapter8/小程序面试.html" class="sidebar-link">小程序面试</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>九.面试总汇</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note_web/chapter9/面试总汇.html" class="sidebar-link">面试总汇</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="nodejs"><a href="#nodejs" class="header-anchor">#</a> NodeJS</h1> <h3 id="nodejs-中-js-的组成"><a href="#nodejs-中-js-的组成" class="header-anchor">#</a> nodejs 中 js 的组成</h3> <ul><li>DOM(完全没有)</li> <li>BOM(干掉了大部分内容)
<ul><li>console.log()</li> <li>setTimeout()</li> <li>setInterval()</li></ul></li> <li>ECMAScript(基本实现)</li></ul> <h4 id="事件轮询机制"><a href="#事件轮询机制" class="header-anchor">#</a> 事件轮询机制</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  timers<span class="token operator">:</span>
    <span class="token function">定时器本阶段执行已被setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">和setInterval</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  pending callbacks<span class="token operator">:</span>
    待定回调<span class="token punctuation">,</span>执行延迟到下一个循环迭代的<span class="token constant">I</span><span class="token operator">/</span><span class="token constant">O</span>回调
  idle<span class="token punctuation">,</span>prepare<span class="token operator">:</span>
    idle<span class="token punctuation">,</span>prepare仅系统内部使用
  poll轮询
    执行<span class="token constant">I</span><span class="token operator">/</span><span class="token constant">O</span><span class="token function">操作回调</span><span class="token punctuation">(</span>文件读写<span class="token punctuation">,</span>数据库读写<span class="token punctuation">)</span>
    依次取出<span class="token punctuation">,</span>同步执行回调函数<span class="token punctuation">,</span><span class="token function">直到全部执行完了</span><span class="token punctuation">(</span>回调队列为空<span class="token punctuation">)</span>
    除非满足下面两个条件之一<span class="token punctuation">,</span>否则一直停留在当前阶段<span class="token punctuation">,</span>不会执行下一个阶段
      <span class="token number">1.</span>定时器到点
      <span class="token number">2.</span>之前设置过了setImmediate
  check 检测<span class="token operator">:</span>
    执行setImmediate回调
  close callbacks<span class="token operator">:</span>
    关闭回调函数<span class="token punctuation">,</span>close
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>宏任务、微任务：
      异步代码是有优先级关系的,有的优先级高先执行,有点优先级低后执行
      微任务优先级高:process/nextTick、Promise.then/cath、queueMicrotask
          优先级最高的:
              process/nextTick
              其他代码按顺序执行
      宏任务优先级低:setTimeout、setImmediate
          看nodejs轮询机制
      js引擎执行异步代码.会优先执行微任务,再执行宏任务,在执行微任务的时候,碰到微任务就会放入下一个微任务队列
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1 4 8 5 2 6 3 9</span>
process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">222</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token function">setImmediate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">333</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> promise <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
promise
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">444</span><span class="token punctuation">)</span>
    process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">555</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">666</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">777</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">888</span><span class="token punctuation">)</span>
    <span class="token function">setImmediate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">999</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">101010</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="nodejs-中的函数"><a href="#nodejs-中的函数" class="header-anchor">#</a> nodejs 中的函数</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code>每一个模块都私有的<span class="token punctuation">,</span>除非通过暴露语法向外暴露内容
      require
      exports
      module<span class="token punctuation">.</span>exports
  nodejs中所有的模块默认使用commonjs模块化<span class="token punctuation">,</span>使用commonjs模块化给所有模块包裹一层函数<span class="token punctuation">,</span>这个函数会将模块化的变量传入进出
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">exports<span class="token punctuation">,</span> require<span class="token punctuation">,</span> module<span class="token punctuation">,</span> __filename<span class="token punctuation">,</span> __dirname</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        exports     暴露模块
        require     引入模块
        module      module<span class="token punctuation">.</span>exports 暴露模块
        __filename  当前文件的绝对路径
        __dirname   当前文件的文件夹的绝对路径
    <span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="package-json"><a href="#package-json" class="header-anchor">#</a> package.json</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">package</span><span class="token punctuation">.</span>json包描述文件
    name<span class="token operator">:</span>
        包名称<span class="token operator">:</span>不能有中文、特殊字符等
        作用<span class="token operator">:</span>下载包时传入的名称
    version<span class="token operator">:</span>
        版本号<span class="token operator">:</span>x<span class="token punctuation">.</span>x<span class="token punctuation">.</span>x
          第一个x<span class="token operator">:</span>代表大版本的更新
          第二个x<span class="token operator">:</span>代表中版本的更新
          第三个x<span class="token operator">:</span>代表修复一些小bug
    dependencies<span class="token operator">:</span>
        生成依赖<span class="token operator">:</span>运行时需要使用的依赖
    devDependencies<span class="token operator">:</span>
        开发依赖<span class="token operator">:</span>构建包时需要使用依赖
    scripts<span class="token operator">:</span>
        运行包指令
        <span class="token string">'start'</span> <span class="token operator">--</span><span class="token operator">&gt;</span>npm start
        <span class="token string">'build'</span> <span class="token operator">--</span><span class="token operator">&gt;</span>npm run build
    创建<span class="token keyword">package</span><span class="token punctuation">.</span>json
        npm init 初始化一个<span class="token keyword">package</span><span class="token punctuation">.</span>json，里面需要直接详细配置
        npm init <span class="token operator">-</span>y 初始化一个默认配置<span class="token keyword">package</span><span class="token punctuation">.</span>json
</code></pre></div><h4 id="npm-包管理"><a href="#npm-包管理" class="header-anchor">#</a> npm 包管理</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code>npm包管理
        如何下载包<span class="token operator">?</span>
    注意<span class="token operator">:</span>下载前先初始化一个<span class="token keyword">package</span><span class="token punctuation">.</span>json

    版本号<span class="token operator">:</span>
        <span class="token number">1.12</span><span class="token number">.4</span> <span class="token operator">--</span><span class="token operator">&gt;</span>必须是<span class="token number">1.12</span><span class="token number">.4</span>版本
        <span class="token operator">^</span><span class="token number">1.12</span><span class="token number">.4</span><span class="token operator">--</span><span class="token operator">&gt;</span>必须是<span class="token number">1.12</span><span class="token punctuation">.</span>x版本<span class="token punctuation">,</span>x取最新的
        <span class="token operator">~</span><span class="token number">1.12</span><span class="token number">.4</span><span class="token operator">--</span><span class="token operator">&gt;</span>必须是<span class="token number">1.</span>x<span class="token punctuation">.</span>x版本<span class="token punctuation">,</span>x取最新的

    <span class="token number">1.</span> npm i xxx  <span class="token operator">===</span> npm i xxx <span class="token operator">-</span><span class="token constant">S</span> <span class="token operator">===</span> npm i xxx <span class="token operator">--</span>save
        默认下载最新版本的包
        创建一个node_modules目录<span class="token punctuation">,</span>把下载的包安装进去
        创建一个<span class="token keyword">package</span><span class="token operator">-</span>lock<span class="token punctuation">.</span>json文件<span class="token punctuation">,</span>npm下载好的文件
            <span class="token number">1.</span>能让第二次下载速度更快
            <span class="token number">2.</span>会记录版本包和依赖关系
            <span class="token number">3.</span>将下载的包添加大奥<span class="token keyword">package</span><span class="token punctuation">.</span>json中产生依赖
    <span class="token number">2.</span> npm i xxx@<span class="token number">1.8</span><span class="token number">.3</span>
        下载指定版本
       npm i xxx@<span class="token number">1.12</span>
        下载<span class="token number">1.12</span><span class="token punctuation">.</span>x版本的包<span class="token punctuation">,</span>x代表最新版本
    <span class="token number">3.</span>npm i xxx <span class="token operator">-</span><span class="token constant">D</span> <span class="token operator">===</span>npm i xx <span class="token operator">--</span>svae<span class="token operator">-</span>dev
        下载包并添加到开发依赖里
    <span class="token number">4.</span>npm i xxx <span class="token operator">-</span>g
        全局安装一个包
        作用<span class="token operator">:</span>
            将来作用cmd<span class="token operator">/</span>终端指令使用<span class="token punctuation">,</span>不是通过模块化语法引入使用
        比如：
            npm i webpack <span class="token operator">-</span>g <span class="token operator">--</span><span class="token operator">&gt;</span>将来就可以在cmd终端中使用webpack指令
        如果本地安装也可以作为指令使用<span class="token operator">:</span>npx xxx
            npx babel <span class="token operator">--</span><span class="token operator">&gt;</span>会将babel临时添加为环境变量<span class="token punctuation">,</span>从而作为指令使用
    <span class="token number">5.</span>npm i
        下载当前<span class="token keyword">package</span><span class="token punctuation">.</span><span class="token function">json中所有依赖</span><span class="token punctuation">(</span>开发依赖、生产依赖<span class="token punctuation">)</span>包
    <span class="token number">6.</span>npm remove xxx
        删除包和依赖
        npm config <span class="token keyword">set</span> prefix <span class="token string">&quot;D:\study\node\node_global&quot;</span>
</code></pre></div><h3 id="buffer"><a href="#buffer" class="header-anchor">#</a> Buffer</h3> <p><strong>Buffe 用来存储二进制数据的容器</strong></p> <h4 id="创建-buffer"><a href="#创建-buffer" class="header-anchor">#</a> 创建 Buffer</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Buffer<span class="token punctuation">.</span><span class="token function">alloc</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span>        里面数据都是<span class="token number">0</span>
Buffer<span class="token punctuation">.</span><span class="token function">allocUnsafe</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span>  里面数据可能包含敏感数据
Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span>       将一个字符串转换为Buffer数据
</code></pre></div><h4 id="使用-buffer"><a href="#使用-buffer" class="header-anchor">#</a> 使用 Buffer</h4> <blockquote><p>Buffer 位于 global 上,所以不需要引入,直接使用</p></blockquote> <ul><li><p><em>UTF-8 编码</em></p> <p><em>英文,一个字节</em></p> <p>中文,三个字节</p></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> buf1 <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">alloc</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf1<span class="token punctuation">)</span> <span class="token comment">//&lt;Buffer 00 00 00 00 00 00 00 00 00 00&gt;</span>
<span class="token keyword">let</span> buf2 <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">allocUnsafe</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf2<span class="token punctuation">)</span> <span class="token comment">//&lt;Buffer 03 00 00 03 7a 89 02 00 50 69&gt;</span>
<span class="token keyword">let</span> buf3 <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;解决问题的方法,不可能由导致这个问题的思维方式来解决&quot;</span><span class="token punctuation">)</span> <span class="token comment">//将字符串转换成buffer存储</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf3<span class="token punctuation">)</span> <span class="token comment">//&lt;Buffer e8 a7 a3 e5 86 b3 e9 97 ae e9 a2 98 e7 9a 84 e6 96 b9 e6 b3 95 2c e4 b8 8d e5 8f af e8 83 bd e7 94 b1 e5 af bc e8 87 b4 e8 bf 99 e4 b8 aa e9 97 ae e9 ... 26 more bytes&gt;</span>
buf3<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// buf3.fill(0);//将数据全部填充为0</span>
<span class="token comment">// console.log(buf3);</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf3<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//转换为字符串的格式</span>
</code></pre></div><h3 id="process-进程"><a href="#process-进程" class="header-anchor">#</a> process 进程</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>process<span class="token punctuation">.</span>argv  <span class="token operator">:</span> 获取运行指令的命令参数
process<span class="token punctuation">.</span>argv0 <span class="token operator">:</span> nodejs程序的目录
process<span class="token punctuation">.</span>env <span class="token operator">:</span> 获取系统环境变量
环境变量<span class="token operator">:</span>path <span class="token operator">--</span><span class="token operator">&gt;</span>遍历每个路径<span class="token punctuation">,</span>查找到程序运行
process<span class="token punctuation">.</span>execArgv <span class="token operator">:</span> 获取运行指令文件前面的命令行参数
process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> 当前文件的绝对路径  <span class="token operator">===</span> __dirname
process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">[</span>code<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> 退出程序
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// console.log(process.argv);</span>
<span class="token comment">/*
  [
    //nondejs程序目录
    'D:\\study\\node\\node.exe',
    //当前运行文件的路径
    'D:\\study\\1108_Web\\Web Front-end course\\直播课\\高级部分\\curriculum\\Node课程\\0304\\code\\02.process.js'
    'hello',
    '猪妈妈'
  ]
*/</span>
<span class="token comment">//console.log(process.argv0);//D:\study\node\node.exe</span>

<span class="token comment">// node --inspect .\02.process.js hello process</span>
<span class="token comment">//console.log(process.execArgv);//[ '--inspect' ]</span>

<span class="token comment">// console.log(process.env)</span>

<span class="token comment">// console.log(process.cwd())//D:\study\1108_Web\Web Front-end course\直播课\高级部分\curriculum\Node课程\0304\code</span>
<span class="token comment">// console.log(__dirname);</span>
<span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span>
<span class="token comment">/**
 * 1.这么终止nodejs程序的运行
 * ctrl+c
 *
 * 2.process.exit();
 */</span>
<span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;定时器执行了&quot;</span><span class="token punctuation">,</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="path-路径"><a href="#path-路径" class="header-anchor">#</a> path 路径</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>path<span class="token punctuation">.</span><span class="token function">relative</span><span class="token punctuation">(</span><span class="token keyword">from</span><span class="token punctuation">,</span> to<span class="token punctuation">)</span>  处理相对路径
处理<span class="token keyword">from</span>到to的相对路径
path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>paths<span class="token punctuation">]</span><span class="token punctuation">)</span> 处理绝对路径

Buffer和process是global全局变量<span class="token punctuation">,</span>所以可以直接使用
而nodejs其他模块<span class="token punctuation">,</span>不需要下载<span class="token punctuation">,</span>但是需要引用才能使用
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// console.log(path.relative('./public', 'index.html'));//..\index.html</span>

<span class="token comment">//console.log(path.resolve('index.html'))//D:\study\1108_Web\Web Front-end course\直播课\高级部分\curriculum\Node课程\0304\code\index.html</span>

<span class="token comment">/*
  需要在path.js文件,获取process.js文件的绝对路径
*/</span>
<span class="token keyword">let</span> dirname <span class="token operator">=</span> __dirname
<span class="token comment">// let dirname = process.cwd();</span>
<span class="token comment">//先找到当前文件的文件夹的路径,再写文件</span>
<span class="token comment">// console.log(path.resolve(dirname, '02.process.js'));</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dirname<span class="token punctuation">,</span> <span class="token string">&quot;../测试/1.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="fs-文件系统"><a href="#fs-文件系统" class="header-anchor">#</a> fs 文件系统</h3> <h4 id="同步写入"><a href="#同步写入" class="header-anchor">#</a> 同步写入</h4> <h6 id="打开文件"><a href="#打开文件" class="header-anchor">#</a> 打开文件</h6> <ul><li>fs.openSync()</li></ul> <h6 id="写入文件"><a href="#写入文件" class="header-anchor">#</a> 写入文件</h6> <ul><li>fs.wirteSync()</li></ul> <h6 id="关闭文件"><a href="#关闭文件" class="header-anchor">#</a> 关闭文件</h6> <ul><li>fs.closeSync()</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//打开文件</span>
<span class="token comment">//fd 文件描述符,代表打开文件的唯一标识</span>
<span class="token comment">//如果文件存在就打开,如果不存在就自动创建文件</span>
<span class="token keyword">let</span> filePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;a.txt&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// w 写入内容会覆盖</span>
<span class="token comment">// a 追加内容</span>
<span class="token keyword">let</span> fd <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">openSync</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fd<span class="token punctuation">)</span>
<span class="token comment">//写入内容</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">writeSync</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> <span class="token string">&quot;春来发几枝&quot;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token comment">//关闭文件</span>
fs<span class="token punctuation">.</span><span class="token function">closeSync</span><span class="token punctuation">(</span>fd<span class="token punctuation">)</span>
</code></pre></div><h4 id="异步写入"><a href="#异步写入" class="header-anchor">#</a> 异步写入</h4> <blockquote><p>异步写入:一般都有回调函数</p></blockquote> <h6 id="打开文件-2"><a href="#打开文件-2" class="header-anchor">#</a> 打开文件</h6> <ul><li>fs.open()</li></ul> <h6 id="写入文件-2"><a href="#写入文件-2" class="header-anchor">#</a> 写入文件</h6> <ul><li>fs.wirte()</li></ul> <h6 id="关闭文件-2"><a href="#关闭文件-2" class="header-anchor">#</a> 关闭文件</h6> <ul><li>fs.close()</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//打开文件</span>
<span class="token keyword">let</span> filePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;a.txt&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// w  写入会覆盖</span>
<span class="token comment">// a  接着后面写入</span>

fs<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> <span class="token string">&quot;w&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> fd</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">/*
    error 错误对象
      null 没有错误
      {错误信息} 有错误
  */</span>
  <span class="token comment">//在nodejs程序中,往往异步回调函数的第一个参数都是error,这种机制我们叫做 错误优先机制(提倡优先解决错误)</span>
  <span class="token comment">//fd 打开文件的文件描述符</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">console<span class="token punctuation">.</span>error</span><span class="token punctuation">(</span>erroe<span class="token punctuation">,</span> <span class="token string">&quot;错误&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//写入文件</span>
  fs<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> <span class="token string">&quot;猪宝宝&quot;</span><span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//不管写入成功与否都要关闭文件</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">console<span class="token punctuation">.</span>error</span><span class="token punctuation">(</span>erroe<span class="token punctuation">,</span> <span class="token string">&quot;错误&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//关闭文件</span>
    fs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">console<span class="token punctuation">.</span>error</span><span class="token punctuation">(</span>erroe<span class="token punctuation">,</span> <span class="token string">&quot;错误&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;文件关闭&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="async-promise-解决异步回调地狱"><a href="#async-promise-解决异步回调地狱" class="header-anchor">#</a> async+promise 解决异步回调地狱</h3> <p><strong>先定义模块</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>封装方法</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//open打开方法</span>
<span class="token keyword">function</span> <span class="token function">open</span><span class="token punctuation">(</span><span class="token parameter">filePath</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//创建promise对象并返回</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//打开文件</span>
    <span class="token keyword">let</span> filePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;a.txt&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">//执行文件</span>
    fs<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> <span class="token string">&quot;w&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> fd</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//失败   将promise对象的状态改变</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token comment">//成功   将promise对象的状态改变成功传入fd</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>fd<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">//write写的方法</span>
<span class="token keyword">function</span> <span class="token function">write</span><span class="token punctuation">(</span><span class="token parameter">fd<span class="token punctuation">,</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//创建promise对象并返回</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//执行文件</span>
    fs<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> string<span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//失败   将promise对象的状态改变</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token comment">//成功   将promise对象的状态改变成功传入fd</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>fd<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">//close关闭的方法</span>
<span class="token keyword">function</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token parameter">fd</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//创建promise对象并返回</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//执行文件</span>
    fs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//失败   将promise对象的状态改变</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token comment">//成功   将promise对象的状态改变成功传入fd</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>fd<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>定义一个 async 函数</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//执行异步操作</span>
  <span class="token comment">/*
    async函数的返回值一定是promise对象
    await会等后面的promise对象发生变化(只等promise对象,别的不会等)
    一旦状态变成成功状态,就不会等了，会将resole(value)中value返回
    一旦失败状态就变成失败状态,退出async函数(剩下代码就不会执行了),并将async函数返回promise对象的状态改为失败状态
  */</span>
  <span class="token keyword">let</span> fd <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;a.txt&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token function">write</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> <span class="token string">&quot;async+promise解决回调地狱&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token function">close</span><span class="token punctuation">(</span>fd<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//async没有promise对象的状态是失败状态</span>
    <span class="token comment">//所有异步代码都成功了，此时async返回promise是成功状态</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;成功&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//只要有一个async函数中有一个promise对象变成失败</span>
    <span class="token comment">//就会终止运行,返回一个失败状态的promise</span>
    <span class="token comment">//error就是失败的原因</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;失败&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="简单写入文件"><a href="#简单写入文件" class="header-anchor">#</a> 简单写入文件</h3> <ul><li>fs.writeFile();</li> <li>fs.writeFileSync();</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> filePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;b.txt&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// {flag:'a'} 往后追加内容，默认为w</span>
fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> <span class="token string">&quot;木木大人&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> flag<span class="token operator">:</span> <span class="token string">&quot;a&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;文件写入成功&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="流式文件写入"><a href="#流式文件写入" class="header-anchor">#</a> 流式文件写入</h3> <ul><li>简单文件写入 -- 一般用于小文件</li> <li>流式文件写入 -- 一般用于大文件</li> <li>fs.createWriteStream()</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> filePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;c.txt&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//创建可写流</span>
<span class="token keyword">let</span> ws <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span>

<span class="token comment">//绑定事件:监听流式文件写入是否结束</span>
<span class="token comment">//once绑定一次性事件,执行完自动解绑</span>
ws<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">&quot;open&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;可写流打开了&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
ws<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">&quot;close&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;可写流关闭了&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//往可写流中塞数据</span>
ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;锄禾日当午&quot;</span><span class="token punctuation">)</span>
ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;汗滴禾下土&quot;</span><span class="token punctuation">)</span>
ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;谁知盘中餐&quot;</span><span class="token punctuation">)</span>
ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;粒粒皆辛苦&quot;</span><span class="token punctuation">)</span>

<span class="token comment">//关闭可写流</span>
ws<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="简单读取文件"><a href="#简单读取文件" class="header-anchor">#</a> 简单读取文件</h3> <ul><li>fs.readFile();</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> filePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./03.path.js&quot;</span><span class="token punctuation">)</span>

fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;读取文件成功&quot;</span><span class="token punctuation">)</span>
  <span class="token comment">//将Buffer数据转换成字符串</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="流式读取文件"><a href="#流式读取文件" class="header-anchor">#</a> 流式读取文件</h3> <ul><li>fs.createReadStream();</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> filePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./a.txt&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//创建可读流</span>
<span class="token keyword">let</span> rs <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span>
<span class="token comment">//可读流默认情况下,只会读取一次数据(64kb)</span>
<span class="token comment">//消费读取的这个数据,可读流就会读取下一次数据</span>
<span class="token keyword">let</span> string <span class="token operator">=</span> <span class="token string">&quot;&quot;</span>

<span class="token comment">//nodejs的设计一般都可以链式调用</span>
rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">/*
      data就是读取的数据
      data事件就是消费可读流的数据
      持续性事件会一直消费可读流,直到所有内容全部读取完毕,可读流会自动关闭
    */</span>
  string <span class="token operator">+=</span> data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">&quot;end&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//可读流数据关闭事件,说明数据拼接完成</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="流式复制文件"><a href="#流式复制文件" class="header-anchor">#</a> 流式复制文件</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> inputFilePath <span class="token operator">=</span> <span class="token string">&quot;../video/04.path路径.mp4&quot;</span>
<span class="token keyword">let</span> outFilePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;d.mp4&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//创建可读流  会自动关闭</span>
<span class="token keyword">let</span> rs <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span>inputFilePath<span class="token punctuation">)</span>
<span class="token comment">//创建可写流  不会自动关闭,需要手动</span>
<span class="token keyword">let</span> ws <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span>outFilePath<span class="token punctuation">)</span>

<span class="token comment">// rs</span>
<span class="token comment">//   .on('data', (data) =&gt; {</span>
<span class="token comment">//     //当数据读取出来,要写入成另外一个文件</span>
<span class="token comment">//     ws.write(data);</span>
<span class="token comment">//   })</span>
<span class="token comment">//   .on('end', () =&gt; {</span>
<span class="token comment">//     //关闭可写流</span>
<span class="token comment">//     ws.end();</span>
<span class="token comment">//   })</span>

<span class="token comment">//会持续性消费可读流数据</span>
<span class="token comment">//将可读数据写入到可写流中</span>
<span class="token comment">//会自动关闭</span>
rs<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>ws<span class="token punctuation">)</span>
</code></pre></div><h3 id="events-事件模块"><a href="#events-事件模块" class="header-anchor">#</a> events 事件模块</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> EmiterEvents <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;events&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">MyEmiter</span> <span class="token keyword">extends</span> <span class="token class-name">EmiterEvents</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> myEvent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyEmiter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//自定义事件</span>

<span class="token comment">//一个事件可以绑定多个回调函数</span>
<span class="token comment">//绑定持久性事件</span>
myEvent<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;aaa&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;111---aaa事件触发&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> <span class="token function-variable function">callback</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;222---aaa事件触发&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
myEvent<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;aaa&quot;</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
<span class="token comment">//绑定一次性事件</span>
myEvent<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">&quot;bbb&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;bbb事件触发&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//触发自定义事件</span>
myEvent<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;aaa&quot;</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">,</span> <span class="token number">1234</span><span class="token punctuation">)</span>
<span class="token comment">//解绑事件</span>
myEvent<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">&quot;aaa&quot;</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
myEvent<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;aaa&quot;</span><span class="token punctuation">)</span>
myEvent<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;bbb&quot;</span><span class="token punctuation">)</span>
myEvent<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;bbb&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="crypto-加密"><a href="#crypto-加密" class="header-anchor">#</a> crypto 加密</h3> <ul><li>消息摘要的加密算法(md5,sha1)
<ol><li>生成的密文长度固定</li> <li>同样的明文加密后得到同样的密文</li> <li>不可逆(不能通过密文逆向破解明文)</li></ol></li> <li>加盐</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> crypto <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;crypto&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// const md5 = crypto.createHash('md5');</span>
<span class="token keyword">const</span> md5 <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">createHash</span><span class="token punctuation">(</span><span class="token string">&quot;sha256&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// 定义明文  必须是字符串</span>
<span class="token keyword">let</span> password <span class="token operator">=</span> <span class="token string">&quot;123456&quot;</span>

<span class="token comment">// 定义盐</span>
<span class="token keyword">const</span> salt <span class="token operator">=</span> <span class="token string">&quot;6TE#6gbXQO&quot;</span>

password <span class="token operator">=</span> password <span class="token operator">+</span> salt

<span class="token comment">// md5.update(password, 'utf8') 加密处理，生成密文</span>
<span class="token comment">// digest('hex') 装换成16进制显示</span>
<span class="token keyword">const</span> secret <span class="token operator">=</span> md5<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>password<span class="token punctuation">,</span> <span class="token string">&quot;utf8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">digest</span><span class="token punctuation">(</span><span class="token string">&quot;hex&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 密文</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>secret<span class="token punctuation">)</span> <span class="token comment">// 54269bc65b5d1be10a75645a296b78c3</span>
</code></pre></div><h3 id="debugger"><a href="#debugger" class="header-anchor">#</a> debugger</h3> <p><strong>如何在 nodejs 中调试代码</strong></p> <ol><li>可以直接在 chrome 浏览器调试
<ol><li>--inspect 启动调试</li> <li>-brk 在第一行打一个断点</li> <li>node --inspect -brk xxx</li></ol></li> <li>在 vscode 里面调试</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> b <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/note_web/chapter2/ECMAScript.html" class="prev">
        ECMAScript
      </a></span> <span class="next"><a href="/note_web/chapter2/git.html">
        Git
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/note_web/assets/js/app.0a8a88e2.js" defer></script><script src="/note_web/assets/js/2.a8152735.js" defer></script><script src="/note_web/assets/js/15.361aa7de.js" defer></script>
  </body>
</html>
