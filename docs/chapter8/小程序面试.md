# 小程序面试

### 微信小程序

1. 生命周期函数
   `onload`
   一个页面只会调用一次,可以在 `onload` 中获取打开当前页面所调用的 `query` 参数.
   `onshow`
   每次打开页面都会调用一次用来显示页面
   `onready`
   代表页面可以和视图层进行交互
   `onHide`
   当 `navigateTo` 或底部 `tab` 切换时调用
   `onUnload`
   页面卸载

2. `app.json`是对小程序的全局配置
   `pages` 字段,用来描述当前小程序所有页面路径
   `window` 字段,小程序的顶部背景色以及文字的颜色等都在这里定义
   `tab` 字段,小程序全局的 `tab` 栏

3. `wxss` 和 `css` 区别
   `wxss` 可以书写 `rpx` 为像素单位,可以使用 `import` 导入
   `wxss` 只支持部分 `css` 选择器

4. 如何提高微信小程序的应用速度?
   提高页面加载速度,可以使用懒加载
   减少默认 `data` 的大小
   组件化开发

5. 小程序和 `H5` 的区别
   `H5` 主要是运行在浏览器, 微信小程序的话运行在非完整的浏览器,是微信开发团队基于浏览器内核完全重构的一个内置解析器,针对小程序专门做了优化,提升了小程序的性能

6. 小程序的双向数据
   小程序里面直接使用 `this.data` 的书写是不可以同步到视图的,必须调用 `this.setData` 方法,然后在方法内部才能实现双向数据绑定

7. 小程序的传参
   使用全局变量,就是在 `app.js` 中实现数据的传递
   可以在跳转或者重定向页面的时候,使用 `url` 携带参数
   可以使用组件模板 `template` 传参

8. mpvue
   `mpvue` 是基于 `vue` 的一个框架,是由美团出品的,专门开发小程序的框架,还有一个 WePY,但是 WePY 是类似于 `Vue` 的框架,因为它只是借鉴了 `Vue` 的开发分格,而 `mpvue` 就是基于 `vue` 的,直接使用 `vue` 写即可.
   `mpvue` 可以实现组件化开发,然后可以直接写 `vue` 开发一样,可以利用 `webpack` 打包工具对项目进行优化,也可以使用 `vuex` 进行数据管理,还可以使用 `npm` 去下载外部的依赖,使用脚手架等来开发项目

9. 支付流程
   首先会生成一个商品的订单,然后会调用微信的下单 API,生成一个预付订单,然后预付订单的信息会携带 `prepay_id`,通过调用支持参数并携带签名,此时才会唤起微信支付功能,会返回相关的支付信息给客户端,当用户点击确认支付的时候,会通过调用 SDK 调用微信支付的接口,然后回发起支付请求,然后服务器会根据支付参数,返回一个需要支付的授权,用户就可以确定支付,输入密码,会提交支付,然后服务器验证完毕只会会完成支付交易,然后回异步的通知支付的结果,根据这个结果通知更新订单状态为已支付,调用查询 API,查询支付结果
